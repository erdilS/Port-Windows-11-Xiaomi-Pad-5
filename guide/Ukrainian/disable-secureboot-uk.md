<img align="right" src="https://raw.githubusercontent.com/erdilS/Port-Windows-11-Xiaomi-Pad-5/main/nabu.png" width="425" alt="Windows 11 Працює на Xiaomi Pad 5">

# Запуск Windows на Xiaomi Pad 5

## Вимкнення безпечного завантаження
> [!Important]
> Дотримуйтесь цього посібника, лише якщо ви хочете вимкнути безпечне завантаження.

### Передумови
- ```Мозок```

- [```Android platform-tools```](https://developer.android.com/studio/releases/platform-tools)

- [```Образ відновлення```](https://github.com/erdilS/Port-Windows-11-Xiaomi-Pad-5/releases/download/1.0/recovery.img)

- [```Образ UEFI з вимкненним secureboot```](https://github.com/erdilS/Port-Windows-11-Xiaomi-Pad-5/releases/download/UEFI/uefi-NoSecureboot-v3.img)

## Плюси та мінуси безпечного завантаження
> За умовчанням безпечне завантаження ввімкнено в цьому посібнику

##### Плюси і мінуси безпечного завантаження
- √ Без водяного знака на головному екрані
- √ Програми, які не працюють у тестовому режимі, працюватимуть
- √ Ви можете робити великі оновлення (наприклад, з 22H2 до 23H2) безпосередньо в оновленні Windows
- × Ви не можете встановити непідписані драйвери

##### Плюси та мінуси вимкненого безпечного завантаження 
- √ Ви можете інсталювати непідписані драйвери
- × Водяний знак на головному екрані
- × Деякі програми/ігри з античіт-програмним забезпеченням можуть не працювати
- × Ви не можете оновлювати робити великі оновлення (наприклад, 22H2 до 23H2) через Windows Update

## Вимкнення безпечного завантаження

#### Зробіть резервну копію кореневого завантажувального образу
> Це знадобиться, щоб повернутися до Android, але ви можете пропустити цей крок, якщо ви вже зробили резервну копію

Скористайтеся функцією «Резервне копіювання завантаження Android» у програмі WOA Helper або завантажте модифіковане відновлення та запустіть
```cmd
adb shell "dd if=/dev/block/platform/soc/1d84000.ufshc/by-name/boot$(getprop ro.boot.slot_suffix) of=/tmp/rooted_boot.img" && adb pull /tmp/rooted_boot.img
```

#### Завантажте відновлення
> Замініть <path\to\recovery> фактичним шляхом до образу відновлення
```cmd
fastboot boot <path\to\recovery.img>
```

#### Активуйте режим накопичувача
> Коли Xiaomi Pad 5 завантажиться в модифіковане відновлення
```cmd
adb shell msc
```

#### Запустіть диспетчер дисків Windows
> Коли Xiaomi Pad 5 буде виявлено як диск
```cmd
diskpart
```

#### Виберіть гучність esp планшета
> Використовуйте `list volume`, щоб знайти його, це той, що називається "ESPNABU"
```diskpart
sel vol <номер>
```

#### Призначити літеру Y
```diskpart
присвоїти букву у
```

#### Вийти з diskpart
```diskpart
exit
```

#### Змініть файли завантажувача
> Щоб увімкнути тестовий режим
```cmd
bcdedit /store Y:\EFI\Microsoft\BOOT\BCD /set "{default}" testsigning on
```

#### Видалення SiPolicy
> Якщо припустити, що ви вимикаєте безпечне завантаження для наявної інсталяції, вам потрібно видалити цей файл, інакше система не завантажуватиметься
```cmd
del Y:\EFI\Microsoft\Boot\SiPolicy.p7b
```

#### Видаліть букву диска для ESPNABU
> Якщо це не працює, проігноруйте це та перейдіть до наступної команди. Цей фантомний диск зникне під час наступного перезавантаження ПК.
```cmd
mountvol y: /d
```

#### Перезавантажтеся у fastboot
```cmd
adb reboot bootloader
```

#### Прошивка UEFI
> Переконайтеся, що ви використовуєте UEFI no secureboot із цієї сторінки, замініть <path\to\uefi-NoSecureboot-v3.img> фактичним шляхом до образу UEFI
```cmd
fastboot flash boot <шлях\до\uefi-NoSecureboot-v3.img>
```
> [!Важливо]
> Обов’язково замініть свій старий UEFI у папці UEFI у внутрішній пам’яті Android, щоб випадково не перепрошити його наступного разу, коли спробуєте перейти на Windows з Android

#### Перезавантажтеся у Windows
```cmd
fastboot reboot
```

## Готово!
