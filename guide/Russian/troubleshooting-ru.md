<img align="right" src="https://raw.githubusercontent.com/erdilS/Port-Windows-11-Xiaomi-Pad-5/main/nabu.png" width="425" alt="Windows 11 Running On A Xiaomi Pad 5">


# Windows на Xiaomi Pad 5

## Решение возможных проблем

## Я не могу переместить файлы в папку Windows из Android

Если вы не можете переместить файлы в папку Windows, это означает, что вы выключили Windows, а не перезапустили ее. Чтобы исправить эту проблему, загрузитесь обратно в Windows и используйте перезагрузку, затем, когда она перезагрузится, загрузитесь в fastboot и используйте ее для возврата в Android

##### Готово!

## Зарядка в Windows не работает
> [!WARNING]
> Не используйте USB-концентратор с питанием и включенным режимом хоста, это может привести к поломке устройства. Если вы используете USB-концентратор с питанием, воспользуйтесь [руководством по отключению режима хоста USB](/guide/Russian/Additional-materials-ru.md#выключение-режима-usb-хоста)

Зарядка в Windows работает только с определенными кабелями. Кабели, которые, как известно, работают, — это оригинальный кабель Poco X3 Pro (обозначается дополнительным оранжево-красным контактом в порту USB-A) и кабель Nimaso 100W USB-C to USB-C для быстрой зарядки.

## Планшет в fastboot не обнаруживается моим ПК/ноутбуком, что мне делать?
- Загрузите [**`QUD.zip`**](https://github.com/n00b69/woa-betalm/releases/download/Qfil/QUD.zip) и распакуйте его.
- Откройте диспетчер устройств и найдите неизвестное устройство или устройство с ошибками, которое может называться Android или QUSB_BULK.
- Щелкните его правой кнопкой мыши, выберите **```Обновить драйверы```** → **`Обзор файлов`**, затем выберите папку QUD, которую вы распаковали ранее.

##### Готово!

## Устройство загружается в Android, но не может загрузиться в загрузчик

### Предварительные условия:
- [Android platform tools](https://developer.android.com/studio/releases/platform-tools)

- [SHRP Recovery](https://github.com/erdilS/Port-Windows-11-Xiaomi-Pad-5/releases/download/1.0/SHRP.img)

> [!Important]
> Это сработает только если у вас есть root-доступ. Если нет, единственный способ восстановить — прошить устройство с помощью EDL с помощью [MrAuthTool](https://mrauthtool.com/)

- Удалите образ **UEFI** из папки UEFI во внутреннем хранилище, затем поместите сюда образ **SHRP recovery**
- Нажмите `QUICKBOOT TO WINDOWS` в приложении WOA Helper
- После загрузки в режим восстановления подключите устройство к ПК и выполните:
```cmd
adb shell parted /dev/block/sda
```
- Запустите ```print```, чтобы вывести список всех разделов
- Найдите разделы длиной более 16 символов, например «Basic Data Partition», и запишите их номер тома
- Переименуйте этот раздел в ```name $ test```, заменив **$** на номер раздела, а **test** на имя, которое вы хотите присвоить разделу
- Запустите ```quit```
- Запустите ```adb reboot bootloader```, и когда вы увидите логотип **FASTBOOT** на экране, прошейте образ загрузки Android с помощью ```fastboot flash boot_a path\to\boot.img```
- Вам может потребоваться сделать то же самое для **boot_b**, если ваше устройство не загружается или загружается обратно в режим восстановления

> [!Note]
> Убедитесь, что вы заменили образ восстановления в папке UEFI на файл UEFI

##### Готово!

## fsa4480.sys BSOD при загрузке
- Откройте папку драйвера
- Удалите строку ```<DriverPackageFile Path="$(mspackageroot)\components\QC8150\Device\DEVICE.SOC_QC8150.NABU\Drivers\USB" Name="fsa4480.inf" ID="fsa4480"/>``` из NABU.xml
- Переустановите драйвер
- Загрузитесь в Windows
> [!NOTE]
> Если вы все еще получаете BSOD, воспользуйтесь руководством [по переустановке](/guide/Russian/reinstall-ru.md)

##### Готово!

## Bootloop после переключения на Android
- Перевдите планшет в режим fastboot

- ```fastboot set_active other```

- ```fastboot flash boot <boot.img>```

- ```fastboot reboot```

##### Готово!

## Устройство запускается в Android, но не запускается в fastboot

### Требования:

- [ADB и Fastboot](https://developer.android.com/studio/releases/platform-tools)

> [!WARNING]
> Возможно, эти шаги не помогут, поскольку на Xiaomi Pad 5 нет полностью рабочего рекавери для установки. Также, как и у большинства современных A/B устройств, у нас нет установщика TWRP из-за изменённого загрузчика. Если у вас установлена AOSP прошивка, она может содержать предустановленное AOSP рекавери. Вы можете использовать его для шагов ниже. Если у вас установлена MIUI без Root-доступа, эти шаги вам не помогут.
>
> Также, пожалуйста, избегайте имён разделов, которые содержат пробелы и специальные символы, и, если это возможно, используйте имена `ESPNABU` и `WINNABU`, которые проверены уже сотни раз. Если вы испортите загрузчик запрещёнными выше именами разделов и у вас MIUI без Root-доступа, вам необходимо прошить прошивку в режиме EDL с авторизованным аккаунтом, что может привести к денежным тратам.


Ошибка связана с тем, что загрузчик не может обработать имена разделов. Чтобы это исправить:

- Запустите рекавери

- Подключите планшет к ПК

- На компьютере откройте командную строку

- Выполните ```adb shell```

- Выполните ```parted```

- Выполните ```print``` чтобы получить список разделов

- Найдите разделы, содержащие пробелы или специальные символы, например "Basic Data Partition" и запомните их номера

- Теперь выполните ```rm <vol number>```, например ```rm 99```


